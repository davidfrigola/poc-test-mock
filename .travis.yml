sudo: required

language: ruby

services:
  - docker

before_install:
  - docker-compose build
  - docker-compose up -d

script:
  - cd acceptance
  - bundle install
  - sh cuke.sh
  - echo "Use mock for testing"
  - docker-compose stop app1
  - cd ..
  - cd mock/wiremock
  - sh fetch_wiremock.sh
  - cd ../../acceptance
  - sh cuke.sh strategy=simple
  - sh ../mock/wiremock/stop.sh
